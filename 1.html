<!DOCTYPE html>

<html>
	<head>
		<meta charset="UTF-8">
		<title>FMS_Cat - ツマミ怖くないっ！シンセ講座 第一回 オシレータ ( Saw, Square, Triangle, Sine )</title>
   		<link rel="stylesheet" href="./github-markdown.css">
		<style type="text/css">
			body
			{
				font-family: Helvetica, Arial;
				background-color: #FFFFFF;
			}

			#article
			{
				position: fixed;
				top: 0px;
				left: 0px;
				padding: 16px;
				margin: 0px;
				overflow-x: hidden;
				overflow-y: scroll;
			}

			#synth
			{
				position: fixed;
				bottom: 0px;
				left: 0px;
				padding: 8px;
				margin: 8px;
				width: 640px;
				height: 240px;
				background-color: #222222;
			}

			#console
			{
				position: fixed;
				bottom: 0px;
				right: 0px;
				padding: 8px;
				margin: 8px;
				height: 240px;
				color: #FFFFFF;
				background-color: #222222;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<div id="article" class="markdown-body" style="width:640px;height:320px;">
#ツマミ怖くないっ！シンセ講座

ここは、シンセサイザー楽しそう！でもツマミがたくさんでどう使えばいいか全然わからない…という人向けのサイトです。  
最終的には、PCで動くフリーのシンセである [Synth1](http://www.geocities.jp/daichi1969/softsynth/) の機能を全て網羅できればと思っています。

このサイトの特徴は **Web上で動く簡易シンセ** です。各回の内容に沿ったシンセをWeb上で動かしながら学ぶことができるようになっています。  
画面左下がシンセのパネルとなっています。最初はボタンが4つしかありません。わあびっくり。  
画面右下がシンセのコンソールログとなっています。コンソールログは、各回において重要となる情報を緑色でハイライトします。  
シンセの演奏はキーボードで行います。ガチャガチャ押してれば音は出ますが、とりあえずZを押すと低いドが出ると思います。

余談ですが、ここのシンセを作るのに [timbre.js](http://mohayonao.github.io/timbre.js/ja/) というJavaScriptのライブラリを使っています。  
JS自体今まであまり触ったことがないので、僕自身も勉強になってとてもいい感じです（吐血）

本記事は自分の偏見や勘違いなどを含んでいるかもしれませんので、シンセに詳しい方等いらっしゃれば、よろしければ [@FMS_Cat](http://twitter.com/FMS_Cat/) に意見をください。  
また、プログラムのバグなどにお気づきの方、意見をお持ちの方も連絡をお願いします。

ここまでの内容はあとでトップページを作ってそこに移動するかも。

##第一回 オシレータ <span style="font-size:16px;">( Saw, Square, Triangle, Sine )</span>

最初はオシレータです。オシレータとは発振回路という意味です。難しいですね。めでたしめでたし。  
とりあえず、-1から1までの間で振動する電気信号を出す感じです。今回はこの信号がそのままスピーカーに行くとどういう音が鳴るか？というのがテーマです。

<a href="http://en.wikipedia.org/wiki/Sawtooth_wave#mediaviewer/File:Waveforms.svg"><img src=http://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Waveforms.svg/780px-Waveforms.svg.png width="200"></a>  
代表的な４種のオシレータ。

### ノコギリ波 ( Saw )

まず最初にノコギリ波です。上の画像のピンク色のものですね。まさにノコギリ！という形をしています。画面左下のパネルだと一番上のものがそうです。  
鳴らしてみると、まさにシンセサイザーという感じの音が出てくると思います（？）。  
ベタな例ですが、 YMO - Rydeen の特徴的なリードがノコギリ波ですね（生のものではないですが）。

<iframe width="420" height="315" src="//www.youtube.com/embed/MFu66ye6YWM" frameborder="0" allowfullscreen></iframe>

実際には、今回紹介するオシレータの音を「フィルター」や「モギュレーション」などといったシンセの機能を用いて調理していったり、オシレータ自体を2つや3つ、あるいはそれ以上に増やしたりしていくことで音を作っていきます。  
でも、もちろん生の音でも十分かっこいいですよね。美味しいですよね刺身。

### スクエア波・矩形波・パルス波 ( Square )

続いてスクエア波です。上の画像の緑色のものです。四角いです。パネルでは上から２つ目がそれです。  
正確には スクエア波≠パルス波 であり、スクエア波はパルス波の特殊なケースです。  
パルス波については、ひと通り音が作れるようになってから説明するつもりなのでもうちょっと後ですね。  
鳴らしてみて、ファミコンっぽい！と思ったなら、それは正解です。  
ファミコンの音源は、パルス波のオシレータ2つと、後述する三角波のオシレータ1つと、ノイズのオシレータ1つを主に使用しています。  
（ノイズについては今回紹介しても良かったけど、また今度にします。）  
ゲームボーイの起動音が一番わかり易いかな？

<iframe width="420" height="315" src="//www.youtube.com/embed/fZy08NsG2FM" frameborder="0" allowfullscreen></iframe>

### 三角波 ( Triangle )

三角波です。上の画像の青色のものです。三角です。パネルでは上から３つ目です。  
ノコギリ波・矩形波に比べて、音量が小さいですね。音の大きさは音の信号の微分が関係しているので、形の鋭いノコギリ波や矩形波に比べると音量が小さくなってしまいます。  
三角波といったらもうコレしか無いよね。星のカービィよりグリーングリーンズ。メインメロディが三角波ですね。

<iframe width="420" height="315" src="//www.youtube.com/embed/HGZCtKaYhJM" frameborder="0" allowfullscreen></iframe>

ゲームボーイとファミコンの音源は少し違うみたいですが、三角波を用いた楽曲の中で一番印象に残っているのはコレです。  
三角波の出番は…正直あまり思いつきません…だれか意見願います…

### サイン波 ( Sine )

サイン波です。上の画像の赤色のものです。パネルでは一番下です。  
サインですね。どう見てもsin(x)です。全ての波の根源。ああ美しい。  
サイン波も三角波同様、音量が比較的小さめです。あれ…もしかして振幅と周期が一定の波の中では一番音量が小さいんじゃ…？とか今気づいてしまった。（興味がある人は微分してみよう！）  
生のサイン波が用いられるシチュエーションは結構たくさんあって、物理の時間にやった音叉とか、NHKの時報とか、放送事故のときの1000Hz Sineとか、たくさんあります。

<iframe width="420" height="315" src="//www.youtube.com/embed/gISicFSLj74" frameborder="0" allowfullscreen></iframe>

サイン波はシンセサイザーでも多く使用されています。  
シンセサイザーの先駆であったテルミンはサイン波を出すし、オルガン（電子楽器？）もサイン波を複数組み合わせているし、アナログシンセサイザーと呼ばれるものは、上に挙げた3種の波をサイン波の合成によって作っていますし、出番は本当にたくさんあります。

---

上に挙げた４つがシンセサイザーにおいて最も重要な４種のプリミティブなオシレータだと思います。これらのオシレータは普通のシンセであればどれも使えると思います。  
先程も述べたとおり、これらを組み合わせたり、加工したりしてシンセサイザーで音を作っていく、というのがシンセサイザーの基本的な仕組みとなっています。  
次回は「エンベロープ ( Amp , ADSR )」の予定です。

なんか、自分自身オシレータを再認識できたような気がする。良いね。
		</div>

		<div style="position:fixed;bottom:0px;left:0px;margin:0px;padding:0px;width:100%;height:272px;background-color:#FFFFFF;">
			<div id="synth">
				<img src="./img/saw1.svg" id="oscSaw" onClick="changeOsc(0)" width="48" height="48"><br>
				<img src="./img/squ.svg" id="oscSqu" onClick="changeOsc(1)" width="48" height="48"><br>
				<img src="./img/tri.svg" id="oscTri" onClick="changeOsc(2)" width="48" height="48"><br>
				<img src="./img/sin.svg" id="oscSin" onClick="changeOsc(3)" width="48" height="48">
			</div>
			<div id="console" style="width: 0px;visibility:visible;">
			</div>
		</div>

		<script src="./marked.js"></script>
		<script src="./timbre.js" type="text/javascript"></script>
		<script src="./k2n.js" type="text/javascript"></script>
		<script>
			document.getElementById("article").innerHTML=marked(document.getElementById("article").innerHTML);

			function resize()
			{
				document.getElementById("article").style.width=""+(window.innerWidth-32)+"px";
				document.getElementById("article").style.height=""+(window.innerHeight-272-32)+"px";
				if(window.innerWidth-640-32-24<16)
				{
					document.getElementById("console").style.visibility="hidden";
				}
				else
				{
					document.getElementById("console").style.visibility="visible";
					document.getElementById("console").style.width=""+(window.innerWidth-640-32-24)+"px";
				}
			}
			resize();
			window.onresize=resize;

			var conRow=0;
			function con(str,clr)
			{
				var temp=document.getElementById("console").innerHTML;
				document.getElementById("console").innerHTML=temp+"<span style=\"color:"+clr+";\">"+str+"</span><br>";
				var temp=document.getElementById("console").innerHTML;
				conRow++;
				console.log(conRow);
				if(12<conRow)
				{
					conRow--;
					document.getElementById("console").innerHTML=temp.slice(temp.indexOf("<br>")+4);
					console.log(document.getElementById("console").innerHTML);
				}
			}

			var osc,env;
			var osc=T("saw");
			var env=T("adsr",{a:10,d:10,s:1.,r:10});
			var synth=T("OscGen",{osc:osc,env:env,mul:.25}).play();

			var isOn=[];
			for(var c=0;c<80;c++)
			{
				isOn.push(false);
			}

			document.onkeydown=function()
			{
				var note=k2n(window.event.keyCode);
				if(note!==0&&!(isOn[note]))
				{
					synth.noteOn(note,64);
					isOn[note]=true;
					con("note on: "+note,"#FFFFFF");
				}
			}

			document.onkeyup=function()
			{
				var note=k2n(window.event.keyCode);
				if(note!==0&&isOn[note])
				{
					synth.noteOff(note,64);
					isOn[note]=false;
					con("note off: "+note,"#BBBBBB");
				}
			}

			function changeOsc(k)
			{
				if(k===0){T(synth.osc.wave="saw");con("osc wave: saw","#00FF66");}
				if(k===1){T(synth.osc.wave="pulse");con("osc wave: square","#00FF66");}
				if(k===2){T(synth.osc.wave="tri");con("osc wave: triangle","#00FF66");}
				if(k===3){T(synth.osc.wave="sin");con("osc wave: sine","#00FF66");}
				document.getElementById("oscSaw").src=k===0?"./img/saw1.svg":"./img/saw.svg";
				document.getElementById("oscSqu").src=k===1?"./img/squ1.svg":"./img/squ.svg";
				document.getElementById("oscTri").src=k===2?"./img/tri1.svg":"./img/tri.svg";
				document.getElementById("oscSin").src=k===3?"./img/sin1.svg":"./img/sin.svg";
			}
		</script>
	</body>
</html>